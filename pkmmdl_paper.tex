%  LaTeX support: latex@mdpi.com 
%  In case you need support, please attach all files that are necessary for compiling as well as the log file, and specify the details of your LaTeX setup (which operating system and LaTeX version / tools you are using).

%=================================================================
\documentclass[robotics,article,submit,moreauthors,pdftex]{Definitions/mdpi} 

% If you would like to post an early version of this manuscript as a preprint, you may use preprint as the journal and change 'submit' to 'accept'. The document class line would be, e.g., \documentclass[preprints,article,accept,moreauthors,pdftex]{mdpi}. This is especially recommended for submission to arXiv, where line numbers should be removed before posting. For preprints.org, the editorial staff will make this change immediately prior to posting.

%--------------------
% Class Options:
%--------------------
%----------
% journal
%----------
% Choose between the following MDPI journals:
% acoustics, actuators, addictions, admsci, aerospace, agriculture, agriengineering, agronomy, algorithms, animals, antibiotics, antibodies, antioxidants, applsci, arts, asc, asi, atmosphere, atoms, axioms, batteries, bdcc, behavsci , beverages, bioengineering, biology, biomedicines, biomimetics, biomolecules, biosensors, brainsci , buildings, cancers, carbon , catalysts, cells, ceramics, challenges, chemengineering, chemistry, chemosensors, children, cleantechnol, climate, clockssleep, cmd, coatings, colloids, computation, computers, condensedmatter, cosmetics, cryptography, crystals, dairy, data, dentistry, designs , diagnostics, diseases, diversity, drones, econometrics, economies, education, electrochem, electronics, energies, entropy, environments, epigenomes, est, fermentation, fibers, fire, fishes, fluids, foods, forecasting, forests, fractalfract, futureinternet, futurephys, galaxies, games, gastrointestdisord, gels, genealogy, genes, geohazards, geosciences, geriatrics, hazardousmatters, healthcare, heritage, highthroughput, horticulturae, humanities, hydrology, ijerph, ijfs, ijgi, ijms, ijtpp, informatics, information, infrastructures, inorganics, insects, instruments, inventions, iot, j, jcdd, jcm, jcp, jcs, jdb, jfb, jfmk, jimaging, jintelligence, jlpea, jmmp, jmse, jnt, jof, joitmc, jpm, jrfm, jsan, land, languages, laws, life, literature, logistics, lubricants, machines, magnetochemistry, make, marinedrugs, materials, mathematics, mca, medicina, medicines, medsci, membranes, metabolites, metals, microarrays, micromachines, microorganisms, minerals, modelling, molbank, molecules, mps, mti, nanomaterials, ncrna, neonatalscreening, neuroglia, nitrogen, notspecified, nutrients, ohbm, particles, pathogens, pharmaceuticals, pharmaceutics, pharmacy, philosophies, photonics, physics, plants, plasma, polymers, polysaccharides, preprints , proceedings, processes, proteomes, psych, publications, quantumrep, quaternary, qubs, reactions, recycling, religions, remotesensing, reports, resources, risks, robotics, safety, sci, scipharm, sensors, separations, sexes, signals, sinusitis, smartcities, sna, societies, socsci, soilsystems, sports, standards, stats, surfaces, surgeries, sustainability, symmetry, systems, technologies, test, toxics, toxins, tropicalmed, universe, urbansci, vaccines, vehicles, vetsci, vibration, viruses, vision, water, wem, wevj

%---------
% article
%---------
% The default type of manuscript is "article", but can be replaced by: 
% abstract, addendum, article, benchmark, book, bookreview, briefreport, casereport, changes, comment, commentary, communication, conceptpaper, conferenceproceedings, correction, conferencereport, expressionofconcern, extendedabstract, meetingreport, creative, datadescriptor, discussion, editorial, essay, erratum, hypothesis, interestingimages, letter, meetingreport, newbookreceived, obituary, opinion, projectreport, reply, retraction, review, perspective, protocol, shortnote, supfile, technicalnote, viewpoint
% supfile = supplementary materials

%----------
% submit
%----------
% The class option "submit" will be changed to "accept" by the Editorial Office when the paper is accepted. This will only make changes to the frontpage (e.g., the logo of the journal will get visible), the headings, and the copyright information. Also, line numbering will be removed. Journal info and pagination for accepted papers will also be assigned by the Editorial Office.

%------------------
% moreauthors
%------------------
% If there is only one author the class option oneauthor should be used. Otherwise use the class option moreauthors.

%---------
% pdftex
%---------
% The option pdftex is for use with pdfLaTeX. If eps figures are used, remove the option pdftex and use LaTeX and dvi2pdf.

%=================================================================
\firstpage{1} 
\makeatletter 
\setcounter{page}{\@firstpage} 
\makeatother
\pubvolume{xx}
\issuenum{1}
\articlenumber{5}
\pubyear{2019}
\copyrightyear{2019}
%\externaleditor{Academic Editor: name}
\history{Received: date; Accepted: date; Published: date}
%\updates{yes} % If there is an update available, un-comment this line

%% MDPI internal command: uncomment if new journal that already uses continuous page numbers 
%\continuouspages{yes}

%------------------------------------------------------------------
% The following line should be uncommented if the LaTeX file is uploaded to arXiv.org
%\pdfoutput=1

%=================================================================
% Add packages and commands here. The following packages are loaded in our class file: fontenc, calc, indentfirst, fancyhdr, graphicx, lastpage, ifthen, lineno, float, amsmath, setspace, enumitem, mathpazo, booktabs, titlesec, etoolbox, amsthm, hyphenat, natbib, hyperref, footmisc, geometry, caption, url, mdframed, tabto, soul, multirow, microtype, tikz
\graphicspath{{./figures/}}
\usepackage{calrsfs} % Für Kalligraphie-F 
\newcommand{\bm}[1]{\boldsymbol{#1}}
% Latex-Makros für häufig verwendete Formelzeichen
\DeclareMathOperator{\arctantwo}{arctan2}
\newcommand{\ortvek}[4]{{ }_{(#1)}{\boldsymbol{#2}}^{#3}_{#4} }
\newcommand{\vek}[3]{\boldsymbol{#1}^{#2}_{#3}}
\newcommand{\rotmat}[2]{{{ }^{#1}\boldsymbol{R}}_{#2}}
\newcommand{\rotmato}[2]{{{ }^{#1}\boldsymbol{\overline{R}}}_{#2}}
\newcommand{\transp}[0]{{\mathrm{T}}}
\newcommand{\ks}[1]{{\mathcal{F}}_{#1}}


%=================================================================
%% Please use the following mathematics environments: Theorem, Lemma, Corollary, Proposition, Characterization, Property, Problem, Example, ExamplesandDefinitions, Hypothesis, Remark, Definition
%% For proofs, please use the proof environment (the amsthm package is loaded by the MDPI class).

%=================================================================
% Full title of the paper (Capitalized)
\Title{Modeling Parallel Robots Kinematics for 3T2R and 3T3R Tasks using Reciprocal Sets of Euler Angles}

% Author Orchid ID: enter ID or remove command
%\newcommand{\orcidauthorA}{0000-0000-000-000X} % Add \orcidA{} behind the author's name
%\newcommand{\orcidauthorB}{0000-0000-000-000X} % Add \orcidB{} behind the author's name

% Authors, for the paper (add full first names)
\Author{Moritz Schappler $^{1,*}$, Svenja Tappe $^{1}$ and Tobias Ortmaier $^{1}$}

% Authors, for metadata in PDF
\AuthorNames{Moritz Schappler, Svenja Tappe and Tobias Ortmaier}

% Affiliations / Addresses (Add [1] after \address if there is only one affiliation.)
\address{%
$^{1}$ \quad Institut für mechatronische Systeme, Leibniz Universität Hannover; firstname.lastname@imes.uni-hannover.de}

% Contact information of the corresponding author
\corres{Correspondence: moritz.schappler@imes.uni-hannover.de;}

% Current address and/or shared authorship
%\firstnote{Current address: Affiliation 3} 
%\secondnote{These authors contributed equally to this work.}
% The commands \thirdnote{} till \eighthnote{} are available for further notes

%\simplesumm{} % Simple summary

%\conference{} % An extended version of a conference paper

% Abstract (Do not insert blank lines, i.e. \\) 
\abstract{A single paragraph of about 200 words maximum. For research articles, abstracts should give a pertinent overview of the work. We strongly encourage authors to use the following style of structured abstracts, but without headings: (1) Background: Place the question addressed in a broad context and highlight the purpose of the study; (2) Methods: Describe briefly the main methods or treatments applied; (3) Results: Summarize the article's main findings; and (4) Conclusion: Indicate the main conclusions or interpretations. The abstract should be an objective representation of the article, it must not contain results which are not presented and substantiated in the main text and should not exaggerate the main conclusions.}

% Keywords
\keyword{Parallel robot; five-DoF task; 3T2R task; functional redundancy; task redundancy; redundancy resolution; reciprocal Euler angles; inverse kinematics} % (list three to ten pertinent keywords specific to the article, yet reasonably common within the subject discipline.)

% The fields PACS, MSC, and JEL may be left empty or commented out if not applicable
%\PACS{J0101}
%\MSC{}
%\JEL{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Only for the journal Diversity
%\LSID{\url{http://}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Only for the journal Applied Sciences:
%\featuredapplication{Authors are encouraged to provide a concise description of the specific application or a potential application of the work. This section is not mandatory.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Only for the journal Data:
%\dataset{DOI number or link to the deposited data set in cases where the data set is published or set to be published separately. If the data set is submitted and will be published as a supplement to this paper in the journal Data, this field will be filled by the editors of the journal. In this case, please make sure to submit the data set as a supplement when entering your manuscript into our manuscript editorial system.}

%\datasetlicense{license under which the data set is made available (CC0, CC-BY, CC-BY-SA, CC-BY-NC, etc.)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Only for the journal Toxins
%\keycontribution{The breakthroughs or highlights of the manuscript. Authors can write one or two sentences to describe the most important part of the paper.}

%\setcounter{secnumdepth}{4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
\label{sec:intro}

Einleitung ins Thema, Aufgabenredundanz, serielle Roboter
\begin{itemize}
	\item Parallele Roboter werden aufgrund ihrer hohen Steifigkeit in großem Ausmaß für Zerspanungsaufgaben verwendet, die mit 5 FG beschrieben werden können: 3T2R Task Space.
	\item Dazu werden hauptsächlich Strukturen mit 6 EE-FG eingesetzt (3T3R Operational Space). Dadurch liegt eine Aufgabenredundanz vor, für deren gradientenbasierte Lösung es noch keine allgemeingültige Lösung für PKM gibt.
	\item Für serielle Industrieroboter in 3T2R-Aufgaben gibt es bereits verschiedene allgemeingültige Verfahren zur Lösung der inversen Kinematik und der resultierenden Aufgabenredundanz \cite{Baron2000,HuoBar2005,Zlajpah2017,LegerAng2016,ZhuQuCaoYan2013,GuoDonKe2015,MousaviGagBouRay2018,1_SchapplerTapOrt2019}
	\item Die gradientenbasierten Verfahren \cite{Baron2000,HuoBar2005,Zlajpah2017,LegerAng2016,1_SchapplerTapOrt2019} ermöglichen die Projektion zusätzlicher Optimierungskriterien in den Nullraum des Gradienten und somit auch die Ausnutzung der Aufgabenredundanz durch gleichzeitige Optimierung der Nebenbedingungen mit der Lösung des IK-Problems.
	\item Die Bildung eines an 3T2R-Aufgaben angepassten Residuumsvektors und des dazu passenden Gradienten erfolgt dabei auf unterschiedliche Weise, wie bspw. Hinzufügen einer virtuellen Achse \cite{Baron2000}, Zerlegung des Task Space \cite{HuoBar2005}, Rotation in Task Frame und weglassen einer Komponente \cite{Zlajpah2017}, Definition der Werkzeugachse durch zwei Punkte und daraus Konstruktion eines Nullraums \cite{LegerAng2016}, Definition von absoluter Orientierung und Orientierungsfehler mit reziproken Euler-Winkeln \cite{1_SchapplerTapOrt2019}.
\end{itemize}

Beschreibung des aktuellen Stands von PKM für 3T2R.

\begin{itemize}
	\item Für den Einsatz von PKM in 3T2R-Aufgaben gibt es unterschiedliche Ansätze \cite{Tale-MasoulehGos2011}: Asymmetrische 5FG (1), Symmetrische 5FG (2), 6FG-Mechanismen, die als 5FG redundant geregelt werden (3).
	\item Die Nutzung einer aktiven Beinkette mit 3T2R-FG oder einer passiven Führungsstrebe mit 3T2R-FG setzt bei der Mobilität an. Dadurch hat die Plattform auch 3T2R-FG.
	\item Dieses Konzept wird in der Literatur an verschiedenen Maschinentypen gezeigt:
	\cite{WangGos1997} für 5UPS/US, \cite{ZhangGos2001} für 5UPS/RUU, \cite{LiuXuYaoXu2015,WenQinZhaLam2016} für 6PUS/UPU, \cite{ZhengGaoZha2005,GaoSunZha2004} für 5UPS/PRPU, \cite{Gogu2006} mit Isoglide5-A1 (3PRRRRR-2PRRRR), \cite{SchreiberGos2003} mit 4URS-1URU, \cite{MbarekNefCor2005,LinLiYanZha2013} mit 4UPS-1UPU oder \cite{GaoPenZhaLi2006} mit 4PSU-1PU*U. Durch die kinematische Struktur hat der EE immer nur 3T2R FG und eine Aufgabenredundanz liegt nicht vor. Die 5UPS-PRPU Maschine aus \cite{ChengWanZha2008} weist zusätzlich eine Antriebsredundanz auf.
	\item In \cite{HuangLi2002} wurde mit Hilfe der Schraubentheorie am Bsp der 5UPU gezeigt, dass die Maschine nur lokale, und keine globale Mobilität aufweist, wenn die 5FG der Beinketten nicht übereinstimmen. Am Beispiel der Metrom-Maschine \cite{BaerWei2006}, der dazu ähnlichen 4SPRR-1PSPR-Maschine von \cite{AlaghebandMahMilBen2015} oder der Isoglide5 \cite{Gogu2006} wird deutlich, dass bei mehreren Beinketten mit 5FG der nicht durch die Aufgabe vorgegebene Rotations-FG um die Werkzeugachse bei allen Beinketten vorliegen muss. Das führt zu einer letzten Drehachse jeder Beinkette in der Werkzeugachse. Bei der konstruktiven Umsetzung wird das letzte Gelenk als rotierender Ring um die Werkzeugachse gewählt \cite{BaerWei2006,AlaghebandMahMilBen2015}.
	\item Davon abweichend werden in \cite{KongGos2005} 5FG-PKM synthetisiert, die symmetrische Beinketten aufweisen. Diese werden in \cite{Tale-MasoulehGos2011} für 5RPUR und in \cite{Tale-MasoulehSaaGosTag2010} für 5PRUR genauer analysiert.
	\item Bei Maschinen mit 3T3R EE-FG wie der Eclipse-Maschine (3PPRS) \cite{HongKim2000} oder Hexapod-Maschinen mit 6UPS-Struktur \cite{MerletPerDan2000}, die für 3T2R eingesetzt werden, kann der Drehwinkel des Endeffektors um die Symmetrieachse des Werkzeugs frei gewählt werden.
\end{itemize}

Methoden zur Lösung der IK. Methoden durchnummerieren und Tabelle mit allen Systemen machen. Dann verschiedene Paper und Roboter den nummerierten Methoden zuordnen.

\begin{itemize}
	\item Für die vorgestellten Maschinen mit 5 EE-FG \cite{LiuXuYaoXu2015,WenQinZhaLam2016,ZhengGaoZha2005,GaoSunZha2004,ChengWanZha2008,AlaghebandMahMilBen2015,BaerWei2006,Tale-MasoulehSaaGosTag2010,Tale-MasoulehGos2011} ist die inverse Kinematik analytisch einfach zu erhalten. Die Berechnung erfolgt durch die Definition der EE-Orientierung mit zwei mitgedrehten Winkeln für die Führungskette, die 3T2R-FG aufweist. Für die restlichen Ketten wird die IK dann analytisch mit Standard-Verfahren berechnet, da die Beinketten eine einfache Struktur aufweisen.
	\item In \cite{MerletPerDan2000} wird die IK für eine 3T3R PKM (6UPS) in Abhängigkeit des Drehwinkels um die Werkzeugachse bestimmt. Der Drehwinkel wird dann mit einer Optimierung und Intervallanalyse gewählt. Mit dem Verfahren ist allerdings keine gradientenbasierte Optimierung der Nebenbedingungen möglich. Da hierbei ähnlich wie in \cite{ZhuQuCaoYan2013,GuoDonKe2015} für serielle Roboter kein Gradient definiert wird, muss eine aufwändigere globale Optimierung durchgeführt werden, bei der der redundante Winkel als Parameter variiert wird.
\end{itemize}

Problembeschreibung, Ansatz des Papers
\begin{itemize}
	\item Die Übersicht zeigt, dass bisher keine allgemeinen Ansätze zur Redundanzauflösung von PKM für 3T2R-Aufgaben bekannt sind.
	\item Die Arbeiten konzentrieren sich entweder auf eine allgemeine Struktursynthese dieser Maschinenstruktur basierend z.B. auf Schraubentheorie \cite{KongGos2005} oder der Theorie der linearen Transformation \cite{Gogu2006}. Für die Auswahl der Maschine für eine gegebene Aufgabe ist allerdings nicht nur die kinematische Struktursynthese, sondern auch die Maßsynthese entscheidend. Diese kombinierte Struktur- und Maßsynthese folgt dem Schema aus Bild \ref{fig:structdimsynth} und benötigt auch eine allgemeingültige Berechnung der IK, was aufgrund der Vielzahl der Systeme mit manuellen, analytischen Verfahren nicht umsetzbar ist.
\end{itemize}


\begin{figure}[tb]
	\input{./figures/comb_struct_dim_synth.pdf_tex}
	\caption{Overview of the procedure for combined structural and dimensional synthesis.}
	\label{fig:structdimsynth}
\end{figure} 

Beitrag des Papers:
\begin{itemize}
	\item Aufbauend auf der Beschreibung der Kinematik mit reziproken Euler-Winkeln \cite{1_SchapplerTapOrt2019} wird ein allgemeines, gradientenbasiertes Verfahren für die IK von PKM vorgestellt
	\item Damit ist es möglich, sowohl PKM mit strukturell 3T2R-FG und Aufgabenredundante PKM mit 3T3R-PKM zu berücksichtigen.
	\item Durch das gradientenbasierte Verfahren, in dem die redundante task space Koordinate komplett eliminiert wird, ist eine effiziente Umsetzung gegeben, die in der Bahnplanung und für Nullraum-Bewegungen der Maschinen eingesetzt werden kann.
\end{itemize}

Rest ist gegliedert:

\begin{itemize}
    \item Problembeschreibung: Inverse Kinematik von PKM bzw. Kinematik-Modellierung Kap \label{ref:PKM_general}
	\item Vorstellung des REW-Verfahrens aus \cite{1_SchapplerTapOrt2019} zur Modellierung serieller kinematischer Ketten Kap \ref{sec:REW_seriell}
	\item Aufstellung der vollständigen kinematischen Zwangsbedingungen für allgemeine PKM mit dem Verfahren, Kap. \ref{sec:ZB_PKM}
	\item Lösung des IK-Problems mit Redundanzauflösung und weitere Anwendungen der Modellierung Kap. \ref{sec:ZB_Anwendung}
	\item Darstellung der Ergebnisse an Beispielsystemen, Kap. \ref{sec:Ergebnisse}
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Inverse Kinematics Problem for Parallel Robots}
\label{sec:PKM_general}

\begin{itemize}
    \item Beschreibung des Systems und der Nomenklatur mit Bild (3RRR und 3RPR, eingezeichnete Vektoren)
    \item Darstellung der kinematischen Zwangsbedingungen als Vektoren und für Betrag der Beinlänge. Vektor rAB und r0E einzeichnen
    \item Eigenschaft nennen: Methode nicht allgemein, sondern Voraussetzung, dass nur die ersten Gelenkwinkel die Zwangsbedingungen beeinflussen
    \item Hinweis Dynamik-Modellierung basiert auch auf diesen Zwangsbedingungen \cite{Merlet2006,BriotKha2015,AbdellatifHei2009,DoThanhKotHeiOrt2009b} und funktioniert auch nur für Roboter, mit diesen Eigenschaften
    \item \cite{Gogu2008} nimmt allgemeine lineare Transformation für Position und Orientierung, aber auf Geschwindigkeitsebene. Damit die inverse Kinematik nicht direkt lösbar und nur für 3T3R.
    \item Formeln: Kinematik der Beinkette und der Plattform, Kinematische Zwangsbedingungen in allgemeiner Form, Einfluss der Beingelenke anhand der Einträge in der Gradientenmatrix
    \item Einschränkung schreiben: Methode nicht für allgemeine PKM anwendbar, die automatisch generiert werden, da immer analytisch die Systeme speziell gelöst werden
    \item Skizzierung des Problems für 3T2R: Unterschiedliche Modellierung für Führungskette und Folgekette, Führungskette in Kap. \ref{sec:REW_seriell}, Folgekette und Zusammenschluss in Kap. \ref{sec:ZB_PKM}.
    \item Bis hier noch keine rotatorischen Zwangsbedingungen hinschreiben. Die kommen erst in den folgenden Kapiteln
\end{itemize}

\begin{figure}[tb]
    \input{./figures/pkm_constr_def_transl.pdf_tex}
    \caption{Kinematic Description of Parallel Robots.}
    \label{fig:pkm_constr_transl}
\end{figure} 

Before addressing the specific model for parallel robots in 3T2R tasks in the next section, the standard kinematics model of kinematics of parallel robots is provided in the following, corresponding to the state of the art \cite{Merlet2006,Gogu2008,BriotKha2015}.
The parallel robot consists of $m$ legs, which each have the joint coordinates $\bm{q}_1$,...,$\bm{q}_m$.
All joints are considered as single-DoF and additionally to the active joints $\bm{q}_{i,\mathrm{a}}$ explicitly all passive joints at the base or at the platform $\bm{q}_{i,\mathrm{p}}$ are included in $\bm{q}_i$.
The coordinates
%
\begin{equation}
\bm{x}
=
\begin{bmatrix}
\bm{x}_{\mathrm{t}}^\transp & \bm{x}_{\mathrm{r}}^\transp
\end{bmatrix}^\transp
\in {\mathbb{R}}^{6}
\label{equ:x_def}
\end{equation}
%
of the endeffector platform describes the position and orientation of the endeffector frame  $\ks{D}$ with respect to the base frame $\ks{0}$, which is marked with left subscript ``$(0)$'' for vectors and left superscript ``$0$'' for rotation matrices.
The position 
%
\begin{equation}
\bm{x}_{\mathrm{t}}
=
\ortvek{0}{r}{}{D}
\in {\mathbb{R}}^{3}
\label{equ:xt_def}
\end{equation}  
%
is defined as the origin of the platform frame and the rotation matrix
%
\begin{equation}
\rotmat{0}{D} (\bm{x}_{\mathrm{r}})
=
\begin{bmatrix}\vek{n}{}{D} & \vek{o}{}{D} & \vek{a}{}{D}\end{bmatrix} \in \mathrm{SO(3)}
\label{equ:xr_def_rotmat}
\end{equation}
%
of the platform frame is expressed with Euler angles
%
\begin{equation}
\bm{x}_{\mathrm{r}}
=
\begin{bmatrix}
\beta_1  & \beta_2 & \beta_3
\end{bmatrix}^{\mathrm{T}}
\in {\mathbb{R}}^{3}
\label{equ:xr_def}
\end{equation} 
%
as a minimal representation of the orientation coordinates.
Without loss of generality, the $X$-$Y$-$Z$-notation
%
\begin{equation}
\bm{R}(\bm{\beta}) = \bm{R}_x(\beta_1) \bm{R}_y(\beta_2) \bm{R}_z(\beta_3) \in \mathrm{SO(3)}.
\label{equ:def_rmat_xyz}
\end{equation}
%
is used for the Euler angles.
%
The relation between joint coordinates $\bm{q}$ and platform coordinates $\bm{x}$ is established with the kinematic constraint equations, for which most commonly the vector loop
%
\begin{equation}
\bm{\Phi}_{\mathrm{t},i}(\bm{q}_i,\bm{x}) = - \ortvek{0}{r}{}{A_iB_i}(\bm{x}) + \ortvek{0}{r}{}{A_iB_i}(\bm{q}_i) 
\label{equ:kinconstrAB}
\end{equation}
%
between the position of the platform coupling point $B_i$ relative to the base coupling point $A_i$ is used for each leg chain $i$ \cite{Merlet2006}.
The second term $\ortvek{0}{r}{}{A_iB_i}(\bm{q}_i)$ corresponds to the forward kinematics of the serial leg chain. 
The vector
\begin{equation}
\ortvek{0}{r}{}{A_iB_i}(\bm{x}) = 
- \ortvek{0}{r}{}{0A_i}
+ \bm{x}_{\mathrm{t}} + \rotmat{0}{D}(\bm{x}_{\mathrm{r}}) \ortvek{D}{r}{}{DB_i}
\label{equ:vec_AB}
\end{equation}
%
includes the term $\rotmat{0}{D}(\bm{x}_{\mathrm{r}})$ that depends on the full  orientation $\bm{x}_{\mathrm{r}}$ of the end-effector.
% with the rotation about the tool axis in 3T2R tasks.

For the bigger part of existing parallel robots, the passive joint coordinates can be eliminated analytically from the equations (\ref{equ:kinconstrAB}), e.\,g. by using the Euclidian distance for U\underline{P}S or R\underline{P}R leg chains or via trigonometry for \underline{R}RR-chains. This leads to the scalar constraint equation

\begin{equation}
\Phi_{i}
=
\Phi_{i}(\bm{q}_{i,\mathrm{a}},\bm{x})
\end{equation}
%
for each leg $i$, which can be assembled to the vector of constraint equations
%
\begin{equation}
\bm{\Phi}(\bm{q}_{\mathrm{a}},\bm{x})
=
\begin{bmatrix}
\Phi_1 & \Phi_2 & \cdots & \Phi_m
\end{bmatrix}^\transp
\end{equation}
%
of the PKM for all $m$ legs.
The differential kinematics of the PKM is calculated with the time derivative
%
\begin{equation}
\frac{\mathrm{d}}{{\mathrm{d}}t} \bm{\Phi}(\bm{q}_\mathrm{a},\bm{x})
=
\bm{\Phi}_{\partial \bm{q}_\mathrm{a}}  \dot{\bm{q}}_\mathrm{a}
+
\bm{\Phi}_{\partial \bm{x}} \dot{\bm{x}}
=
\bm{0}
\end{equation}
%
where the passive joint coordinates $\bm{q}_{\mathrm{p}}$ do not occur, since they have been eliminated a the previous step.
The the inverse kinematics matrix\footnote{We follow the argumentation from \cite{Gogu2008} to avoid the term ``Jacobian'', since the matrix is not a Jacobian in the mathematical sense to project between two spaces. The name results from the inversion of this matrix in the inverse kinematics problem.}
%
\begin{equation}
\bm{\Phi}_{\partial \bm{q}_{\mathrm{a}}}
=
\frac{\partial \bm{\Phi}}{\partial \bm{q}_{\mathrm{a}}}
=
\begin{bmatrix}
\Phi_{1,\partial \bm{q}_{1,\mathrm{a}}}  & 0 & 0 & 0\\
0 & \Phi_{2,\partial \bm{q}_{2,\mathrm{a}}} & \ddots & 0  \\
0 & \ddots & \ddots & 0  \\
0 & 0 & 0 & \Phi_{m,\partial \bm{q}_{m,\mathrm{a}}}
\end{bmatrix}
\label{equ:PKM_phi_grad_q}
\end{equation}  
%
of this model has diagonal form and the direct-kinematics matrix
%
\begin{equation}
\bm{\Phi}_{\partial \bm{x}}
=
\frac{\partial \bm{\Phi}}{\partial \bm{x}}
=
\begin{bmatrix}
\partial \Phi_1/\partial \bm{x}\\
\partial \Phi_2/\partial \bm{x}\\
\vdots \\
\partial \Phi_m/\partial \bm{x}\\
\end{bmatrix}
\label{equ:PKM_phi_grad_x}
\end{equation}
%
is fully populated.
This definition of the constraints has two drawbacks:
\begin{enumerate}
    \item For parallel robots with arbitrary leg chains like those generated by a structural synthesis \cite{Gogu2008,RamirezKotOrt2015}, it is generally not possible to eliminate the passive joint coordinates. If more than three joints per leg influence the coupling point position $B_i$, the three kinematic constraints per joint in (\ref{equ:kinconstrAB}) are not sufficient to generate enough equations for the matrix of (\ref{equ:PKM_phi_grad_q}) to become invertible. Projection-based methods for the derivation of the dynamics \cite{Merlet2006,BriotKha2015,AbdellatifHei2009,DoThanhKotHeiOrt2009b} underly the same restrictions.
    \item Exploiting the reduction of endeffector coordinates for 3T2R tasks is not possible, since all endeffector coordinates are included in (\ref{equ:vec_AB}).
\end{enumerate}

An alternative kinematic model encounter this is presented in the next section.

%Property
%
%\begin{equation}
%\frac{\partial \bm{\Phi}_i}{\partial \bm{q}_i}
%=
%\begin{bmatrix}
%* & \cdots & * & 0 & \cdots & 0\\
%\vdots &  \cdots & \vdots & \vdots & \cdots & \vdots \\
%* & \cdots & * & 0 & \cdots & 0\\
%\end{bmatrix}
%\label{equ:PKM_phi_grad_q_form}
%\end{equation}

%is dependent on the kinematic structure of the robot.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Reciprocal Sets of Euler Angles for Kinematics of Serial Chains}
\label{sec:REW_seriell}

\cite{1_SchapplerTapOrt2019}

\begin{itemize}
    \item Modellierung serieller Ketten für 3T3R und 3T2R. Anwendung direkt auf PKM-Beinkette
    \item Bild: Stilisierte PKM (Planar 3RRR) mit Hervorhebung Beinkette 1 und Plattform, restliche Beinketten nur ausgegraut. Zwei Teilbilder: Ketten geöffnet und geschlossen. Darstellung der Orientierung des Endeffektors durch Plattform-Dreieck. Darstellung beliebiger Verdrehung der Plattform durch mehrere gestrichelte Plattformen.
    \item Formeln aus WC-Paper, aber Nomenklatur anpassen an PKM Beinkette 1
\end{itemize}




To take the rotational symmetry around the tool axis into account, a new set of 3T2R task space coordinates
%
\begin{equation}
\bm{\eta}
=
\begin{bmatrix}
\bm{\eta}_{\mathrm{t}}^\transp & 
\bm{\eta}_{\mathrm{r}}^\transp
\end{bmatrix}^\transp
\in {\mathbb{R}}^{5}.
\end{equation}  
%
has to be defined.
The translational part
%\vspace{-0.5em}
%
\begin{equation}
\bm{\eta}_{\mathrm{t}}
=
\bm{x}_{\mathrm{t}}
=
\ortvek{0}{r}{}{D}
\in {\mathbb{R}}^{3}
\end{equation}  
%
remains unchanged relative to the operational space coordinates $\bm{x}$.
The rotational part
%
\begin{equation}
\bm{\eta}_{\mathrm{r}}
=
\begin{bmatrix}
\beta_1  & \beta_2
\end{bmatrix}^\transp
=
\underbrace{\begin{bmatrix}
    1 & 0 & 0  \\ 
    0 & 1 & 0    \end{bmatrix}}_{=\bm{P}_{\eta}}
\bm{x}_{\mathrm{r}}
\in {\mathbb{R}}^{2}
\label{equ:etar_def}
\end{equation}
%
only contains the first two rotational coordinates of $\bm{x}$.
The last operational space coordinate $\beta_3$, the rotation around the $z$-axis $\bm{a}_{D}$ of $\ks{D}$, is excluded from the task space by the selection matrix $\bm{P}_{\eta}$.
To be able to set the rotational DoF around the tool axis in 3T2R tasks arbitrarily and use gradient-based inverse kinematics, $\beta_3$ has to be eliminated completely from the kinematics equations (\ref{equ:kinconstrAB}).
%As already exposed in Sec.\,\ref{sec:intro}
%
%
To simplify the following elaborations, the platform frame $\ks{D}$ is still identified as the desired frame of the inverse kinematics problem and the endeffector frame that results from the joint angles of leg $i$ is now termed $\ks{E}$, which again corresponds to the forward kinematics of the leg chain.
%
\begin{figure}[tb]
    \input{./figures/pkm_constr_def_rot_lead.pdf_tex}
    \caption{Different cases for the kinematic constraints of the leading chain.}
    \label{fig:pkm_constr_rot_lead}
\end{figure} 
%
For a formulation without the tool axis rotation a different constraint definition
%
\begin{equation}
\bm{\Phi}_{\mathrm{t},i}(\bm{q}_i,\bm{x})
= 
- \ortvek{0}{r}{}{D} + \ortvek{0}{r}{}{E}(\bm{q}_i)
=
- \bm{x}_{\mathrm{t}} + \ortvek{0}{r}{}{0E}(\bm{q}_i) \in {\mathbb{R}}^{3}
\label{equ:Phit_def}
\end{equation}
%
containing the vector loop from the robot base frame $\ks{0}$ to the platform $\ks{D}$ and the leg chain endeffector $\ks{E}$ can be used where in contrast to (\ref{equ:kinconstrAB}) only the translational part $\bm{x}_{\mathrm{t}}$ of the end-effector coordinates appears and not the rotational part $\bm{x}_{\mathrm{r}}$.
The vector loop is depicted in Fig.\,\ref{fig:pkm_constr_rot_lead}\,(a) and (b) for a planar robot with opened and closed loops.
As a drawback, all joint angles $\bm{q}_i$ of the leg $i$ and not only the coordinates of the first joints counted from the base are now included in the vector
%
\begin{equation}
\ortvek{0}{r}{}{0E}(\bm{q}_i) = 
\ortvek{0}{r}{}{0A_i}
+ \ortvek{0}{r}{}{A_iB_i}(\bm{q}_i) + \rotmat{0}{B_i}(\bm{q}_i) \ortvek{B_i}{r}{}{B_iE}.
\end{equation}
%
To account for the increased number of included joints, the full kinematic constraints
%
\begin{equation}
\bm{\Phi}_i=\begin{bmatrix}
\bm{\Phi}_{\mathrm{t},i}^\transp & \bm{\Phi}_{\mathrm{r},i}^\transp
\end{bmatrix}^\transp \in {\mathbb{R}}^{6},
\label{equ:Phi_def}
\end{equation}
%
have to be extended by the rotational part
%
\begin{align}
\bm{\Phi}_{\mathrm{r}_i}(\bm{q}_i,\bm{x})
=\bm{\alpha}\left(\rotmat{0}{D}^\transp (\bm{x}_{\mathrm{r}})\rotmat{0}{E}(\bm{q}_i)\right)
\end{align}
%
of the kinematic constraints, which is needed to generate enough equations for an invertible matrix in the differential equations.
The constraints again contain the deviation between the desired end-effector frame $\ks{D}$ expressed with $\bm{x}$ and the actual robots end-effector frame $\ks{E}$ expressed with $\bm{q}$.
The goal of eliminating the tool rotation $\beta_3$ from the equations is not achieved yet, since all three components of the platform orientation $\bm{x}_\mathrm{r}$ affect the rotation matrix $\rotmat{0}{D}$. This can be addessed by the selection of the Euler angles:
Similar to the definition of the rotational operational space coordinates (\ref{equ:xr_def}) the constraints 
%
\begin{align}
\bm{\Phi}_{\mathrm{r},i}(\bm{q}_i,\bm{x}) 
= \begin{bmatrix}
\alpha_1  & \alpha_2 & \alpha_3
\end{bmatrix}^\transp
&=\bm{\alpha}\left(\rotmat{D}{E}(\bm{x}_{\mathrm{r}},\bm{q}_i)\right)\nonumber \\
&=\bm{\alpha}\left(\rotmat{0}{D}^\transp (\bm{x}_{\mathrm{r}})\rotmat{0}{E}(\bm{q}_i)\right) \in {\mathbb{R}}^{3}
\label{equ:Phir_def}
\end{align}
%
are also expressed with a set of Euler angles $\bm{\alpha}$.
In the following, ``$\bm{\alpha}$'' will always refer to the rotation error/residual and ``$\bm{\beta}$'' to an orientation relative to the base frame.
The Euler angle convention of $\bm{\alpha}$ can be chosen independently of the choice for the orientation representation in  $\bm{\beta}$.
The intuitive approach of choosing
%
\begin{equation}
\bm{R}(\bm{\alpha}^*) := \bm{R}_x(\alpha_1^*) \bm{R}_y(\alpha_2^*) \bm{R}_z(\alpha_3^*) \in \mathrm{SO(3)}
\label{equ:alpha_convention_xyz}
\end{equation}
%
\begin{figure}[tb]
    \input{./figures/frame_comparison_combined_5dof_6dof.pdf_tex}
    \caption{Overview of the different frames (a) for 6-dof tasks with standard Euler angle notation and (b) for 5-dof tasks with reciprocal Euler angle notation.}
    \label{fig:frames_5dof_6dof}
\end{figure} 
%
%
the same way as $\bm{\beta}$ leads to a set of transformations depicted in Fig.\,\ref{fig:frames_5dof_6dof}\,(a) where the intermediate steps of the single elementary rotations are omitted since they have no technical meaning.
The upperscript in $\bm{\alpha}^*$ in (\ref{equ:alpha_convention_xyz}) demarcates this specific example and following elaborations on the calculation of $\bm{\alpha}$.

To be able to remove the redundant coordinate $\beta_3$ from the new rotational constraints of (\ref{equ:Phir_def}), it is necessary to change the expression of the orientation error $\bm{\alpha}$ to be reciprocal to the expression of the absolute orientation $\bm{\beta}$. By using the $Z$-$Y$-$X$-Euler angles with
%
\begin{equation}
\bm{R}(\bm{\alpha}) := \bm{R}_z(\alpha_1) \bm{R}_y(\alpha_2) \bm{R}_x(\alpha_3) \in \mathrm{SO(3)}
\label{equ:def_rmat_zyxr}
\end{equation}
%
only the error component $\alpha_1$ is affected by rotations around the tool axis, which is the $z$-axis of the intermediate frames $\ks{A1}$, $\ks{A2}$ and the platform frame $\ks{D}$ in Fig.\,\ref{fig:frames_5dof_6dof}\,(b), where the frame rotations with the reciprocal set of Euler angles are sketched.
The mathematical proof is given in appendix\,\ref{sec:appendix_proof_REW} and in ref.\, \cite{1_SchapplerTapOrt2019}.
%
The new, reduced rotational part of the kinematic constraints
%
\begin{equation}
\bm{\Psi}_{\mathrm{r},i}(\bm{q}_i,\bm{\eta}) = 
\begin{bmatrix}
\alpha_2  & \alpha_3
\end{bmatrix}^\transp
=
\overbrace{\begin{bmatrix}
    0 & 1 & 0  \\ 
    0 & 0 & 1
    \end{bmatrix}}^{=\bm{P}_{\Psi}}
\bm{\Phi}_{\mathrm{r},i} (\bm{q}_i,\bm{x})
\in {\mathbb{R}}^{2}.
\label{equ:Psir_def}
\end{equation}
%
does not contain the tool rotation any more.
The condition $\bm{\Phi}=\bm{0}$ leads to a valid configuration of the parallel robot in 3T3R tasks and $\bm{\Psi}=\bm{0}$ leads to a valid position and orientation of the tool axis in 3T2R tasks.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Full Kinematic Constraints for Parallel Robots using Reciprocal Sets of Euler Angles}
\label{sec:ZB_PKM}

\begin{itemize}
    \item Kinematische Zwangsbedingungen der Folge-Ketten: Begründung für Vorgehensweise Führungskette/Folgekette (es kann nur für eine Kette die Orientierung der Plattform frei sein. Für die anderen gilt dann diese Orientierung)
    \item Bild: 3RRR mit Führungs- und Folgekette; geöffnet und geschlossen. Getrichelte Plattform für Orientierung aus Folge-Kette. KS-Definition der Plattform: y-Achse zeigt auf gegenüberliegenden Eckpunkt.
    \item Darstellung der Gradientenmatrizen aus Kettenregel
    \item Vollständige Jacobi-Matrix für 3T3R und 3T2R
\end{itemize}



\begin{figure}[tb]
    \input{./figures/pkm_constr_def_rot_follow.pdf_tex}
    \caption{Different cases for the kinematic constraints of the following chain.}
    \label{fig:pkm_constr_rot_follow}
\end{figure} 




Again, only the rotational component $\bm{\Phi}_{\mathrm{r}_i,\partial \bm{x}_{\mathrm{r}}}$ of 
%
\begin{equation}
\partial \bm{\Phi}_i/\partial \bm{x}
=
\begin{bmatrix}
\partial\bm{\Phi}_{\mathrm{t}_i}/\partial \bm{x}_{\mathrm{t}} & \partial\bm{\Phi}_{\mathrm{t}_i}/\partial \bm{x}_{\mathrm{r}} \\
\bm{0} & \partial\bm{\Phi}_{\mathrm{r}_i}/\partial \bm{x}_{\mathrm{r}} \\
\end{bmatrix}
\end{equation}
is regarded due to the focus on rotation in this paper.

Using $\bm{\Psi}_{\partial \bm{q}}$ and $\bm{\Psi}_{\partial \bm{x}}$ in (\ref{equ:PKM_phi_grad_q}) and (\ref{equ:PKM_phi_grad_x}) for 3T2R tasks promises to improve motion planning and controllers by calculating actuator forces considering the tool symmetry and allowing the incorporation of nullspace movements and forces.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Differential Kinematics for Parallel Robots}
\label{sec:ZB_Anwendung}

\begin{itemize}
    \item Gradientenbasierte Lösung der inversen Kinematik mit Nullraum (benötigt nur die geometrische Matrix der inversen Kinematik). Folge der Benennung aus \cite{Gogu2008}, dass es die geometrische Matrix und nicht die Jacobi-Matrix ist.
    \item Geschwindigkeits-Zusammenhang: Geometrische Matrix der DK ist notwendig. Zusammenhang beschreiben
    \item Gradientenbasierte Lösung der inversen Kinematik 3T3R/3T2R für serielle Roboter als Anwendung.
\end{itemize}

\subsection{Constraint Gradients for the Leading Leg}

\begin{align}
\frac{\partial}{\partial \bm{q}}\bm{\Phi}_{\mathrm{r}}
&=
\frac{\partial}{\partial \bm{q}} \bm{\alpha}\left(\rotmat{0}{D}^\transp(\bm{x}) \rotmat{0}{E}(\bm{q})\right) \label{equ:grad_Phi_q}\\
&=
\frac{\partial}{\partial \bm{q}} \bm{\alpha}\left(\overline{\prod}\left( \rotmato{0}{D}^\transp(\bm{x}), \rotmato{0}{E}(\bm{q})\right)\right) \nonumber \\
&=
%underbrace für Geschweifte Klammern drunter, vphantom nur für vertikale Größe des mittleren Terms
\underbrace{\vphantom{\left(\frac{\partial \overline{\prod}\left(\rotmato{0}{D}^\transp, \rotmato{0}{E}\right)}{\partial \rotmato{0}{E}}\right)}\left(\frac{\partial \bm{\alpha}}{\partial \overline{\bm{R}}}\right)}_{\mathrm{I} \in {\mathbb{R}}^{3 \times 9}}
\underbrace{\left(\frac{\partial \overline{\prod}\left(\rotmato{0}{D}^\transp, \rotmato{0}{E}\right)}{\partial \rotmato{0}{E}}\right)}_{\mathrm{II} \in {\mathbb{R}}^{9 \times 9}}
\underbrace{\vphantom{\left(\frac{\partial \overline{\prod}\left(\rotmato{0}{D}^\transp, \rotmato{0}{E}\right)}{\partial \rotmato{0}{E}}\right)}\left(\frac{\partial \rotmato{0}{E}(\bm{q})}{\partial \bm{q}} \right)}_{\mathrm{III} \in {\mathbb{R}}^{9 \times \mathrm{dim}(\bm{q})}}.  \nonumber
\end{align}


The calculation of the inverse kinematics Jacobian
%
\begin{equation}
\bm{\Phi}_{\partial \bm{x}}
=
\frac{\partial \bm{\Phi}}{\partial \bm{x}}
=
\begin{bmatrix}
\partial \bm{\Phi}_1/\partial \bm{x}\\
\partial \bm{\Phi}_2/\partial \bm{x}\\
\vdots \\
\partial \bm{\Phi}_m/\partial \bm{x}\\
\end{bmatrix}
\label{equ:PKM_phi_grad_x_doppelt}
\end{equation}  
%
can be simplified similar to the process described in Sec.\,\ref{sec:RecEulAng_implement} with
%
\begin{align}
\frac{\partial}{\partial \bm{x}_{\mathrm{r}}}\bm{\Phi}_{\mathrm{r}_i}
&=
\frac{\partial}{\partial \bm{x}_{\mathrm{r}}} \bm{\alpha}\left(\left(\rotmat{0}{E}^\transp(\bm{q}_i) \rotmat{0}{D}(\bm{x}_{\mathrm{r}})\right)^\transp\right) \label{equ:grad_Phi_x} \\
&=
\frac{\partial}{\partial \bm{x}_{\mathrm{r}}} \overline{\bm{\alpha}}\left(
\bm{P}_{\mathrm{T}}
\overline{\prod}\left( \rotmato{0}{E}^\transp(\bm{q}_i), \rotmato{0}{D}(\bm{x}_{\mathrm{r}})\right)\right) \nonumber \\
&=
%underbrace für Geschweifte Klammern drunter, vphantom nur für vertikale Größe des dritten Terms
\underbrace{\vphantom{\frac{\partial \overline{\prod}\left( \rotmato{0}{E}^\transp, \rotmato{0}{D}\right)}{\partial \rotmato{0}{D}}}
    \frac{\partial \overline{\bm{\alpha}}}{\partial \overline{\bm{R}}}}_{\mathrm{I}}
\underbrace{\vphantom{\frac{\partial \overline{\prod}\left( \rotmato{0}{E}^\transp, \rotmato{0}{D}\right)}{\partial \rotmato{0}{D}}}
    \bm{P}_{\mathrm{T}}}_{\mathrm{II}}
\underbrace{\frac{\partial \overline{\prod}\left( \rotmato{0}{E}^\transp, \rotmato{0}{D}\right)}{\partial \rotmato{0}{D}}}_{\mathrm{III}}
\underbrace{\frac{\partial \rotmato{0}{D}(\bm{x}_{\mathrm{r}})}{\partial \bm{x}_{\mathrm{r}}}}_{\mathrm{IV}} \nonumber
\end{align}
%
where the simplicity of the single expression is demonstrated in appendix\,\ref{sec:appendix_gradient_matrix}.

\subsection{Constraint Gradients for the Following Legs}


\subsection{Constraint Gradients for the Parallel Robot}


Gradient q 2

\begin{equation}
\bm{\Phi}_{\bm{q}}(\bm{q},\bm{x})
=
\begin{pmatrix}
\bm{\Phi}_{1,\bm{q}_1}  & 0 & 0 & 0\\
\bm{\Phi}_{2,\bm{q}_1} & \bm{\Phi}_{2,\bm{q}_2} & \ddots & 0  \\
\vdots & \ddots & \ddots & 0  \\
\bm{\Phi}_{m,\bm{q}_1} & 0 & 0 &\bm{\Phi}_{m,\bm{q}_m}
\end{pmatrix}
\end{equation}

Gradient q 3

\begin{equation}
\bm{\Psi}_{\bm{q}}(\bm{q},\bm{\eta})
=
\begin{pmatrix}
\bm{\Psi}_{1,\bm{q}_1}  & 0 & 0 & 0\\
\bm{\Phi}_{2,\bm{q}_1} & \bm{\Phi}_{2,\bm{q}_2} & \ddots & 0  \\
\vdots & \ddots & \ddots & 0  \\
\bm{\Phi}_{m,\bm{q}_1} & 0 & 0 &\bm{\Phi}_{m,\bm{q}_m}
\end{pmatrix}
\end{equation}


Gradient x 2

\begin{equation}
\bm{\Phi}_{\bm{x}}(\bm{q},\bm{x})
=
\begin{pmatrix}
\bm{\Phi}_{1,\bm{x}} \\
\bm{0} \\
\vdots \\
\bm{0}
\end{pmatrix}
\end{equation}


Gradient x 3

\begin{equation}
\bm{\Phi}_{\bm{\eta}}(\bm{q},\bm{\eta})
=
\begin{pmatrix}
\bm{\Phi}_{1,\bm{\eta}} \\
\bm{0} \\
\vdots \\
\bm{0}
\end{pmatrix}
\end{equation}

\subsection{Gradient-Based Solution of the Inverse Kinematics Problem}

Following \cite{GoldenbergBenFen1985}, the inverse kinematics problem for serial link robots in 6-DoF tasks at the iterative step $k+1$ can be derived with the linear approximation of the Taylor series expansion of $\bm{\Phi}(\bm{q},\bm{x})$ to
%
\begin{equation}
\bm{\Phi}(\bm{q}^{k+1},\bm{x}) = 
\bm{\Phi}(\bm{q}^{k},\bm{x})
+
\frac{\partial}{\partial \bm{q}} \bm{\Phi}(\bm{q},\bm{x}) \biggr\rvert_{\bm{q}^k} (\bm{q}^{k+1} - \bm{q}^k)
\label{equ:taylor_phi}
\end{equation}
%
where $\bm{\Phi}_{\partial\bm{q}}=(\partial \bm{\Phi} / \partial \bm{q})$ is called the ``Jacobian matrix corresponding to the residual vector'' ($\bm{\Phi}$) in \cite{GoldenbergBenFen1985} and $\bm{q}^0$ is assumed as given.
%
For 3T2R tasks
%
\begin{equation}
\bm{\Psi}(\bm{q}^{k+1},\bm{\eta}) = 
\bm{\Psi}(\bm{q}^{k},\bm{\eta})
+
\frac{\partial}{\partial \bm{q}} \bm{\Psi}(\bm{q},\bm{\eta}) \biggr\rvert_{\bm{q}^k} (\bm{q}^{k+1} - \bm{q}^k)
\label{equ:taylor_psi}
\end{equation}

can be defined in the same way with the condition

\begin{equation}
\bm{\Psi}(\bm{q}^{k+1},\bm{\eta})=\bm{0}
\end{equation}



\begin{align}
{\Delta}\bm{q}
&=
{\Delta}\bm{q}_{\mathrm{T}} + {\Delta}\bm{q}_{\mathrm{N}} \nonumber \\
&=
\bm{\Psi}_{\partial\bm{q}}^{\dagger} (-\bm{\Psi}) +  (\bm{1}-\bm{\Psi}_{\partial\bm{q}}^{\dagger}\bm{\Psi}_{\partial\bm{q}}) h_{\partial\bm{q}}
\label{equ:nullspace}
\end{align}


\begin{equation}
h(\bm{q})
=
\frac{1}{2} (\bm{q}-\bar{\bm{q}})^\transp\bm{W}(\bm{q}-\bar{\bm{q}})
\end{equation}  

\begin{equation}
h_{\partial\bm{q}}
=
\frac{\partial h}{\partial \bm{q}}
=
\bm{W}(\bm{q}-\bar{\bm{q}})
\end{equation}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Results}
\label{sec:Ergebnisse}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Resolution of Functional Redundancy of a Serial-Link 6-DoF Robot in 3T2R tasks}


\begin{itemize}
    \item Beispiel IK-Optimierung über Trajektorie (Industrieroboter in 3T2R-Traj., Bsp. aus \cite{HuoBar2008,HuoBar2011})
    \item Histogramm IK-Optimierung für verschiedene Roboter und zufällige Start- und End-Posen (Balken aufgegliedert nach 1., 2., ... Versuch)
\end{itemize}

\subsection{Resolution of Functional Redundancy of a Parallel Robot in 3T2R tasks}

\begin{itemize}
    \item Beispiel IK-Optimierung über Trajektorie (Parameter ähnlich wählen wie in \cite{MerletPerDan2000}).
\end{itemize}


\subsection{Determination of Degrees of Freedom of a Parallel Robot}

\begin{itemize}
    \item Beispielrechnung Delta-Roboter: Jacobi-Matrix Rang und Null-Einträge
\end{itemize}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Discussion}

Authors should discuss the results and how they can be interpreted in perspective of previous studies and of the working hypotheses. The findings and their implications should be discussed in the broadest context possible. Future research directions may also be highlighted.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Materials and Methods}

Materials and Methods should be described with sufficient details to allow others to replicate and build on published results. Please note that publication of your manuscript implicates that you must make all materials, data, computer code, and protocols associated with the publication available to readers. Please disclose at the submission stage any restrictions on the availability of materials or information. New methods and protocols should be described in detail while well-established methods can be briefly described and appropriately cited.

Research manuscripts reporting large datasets that are deposited in a publicly available database should specify where the data have been deposited and provide the relevant accession numbers. If the accession numbers have not yet been obtained at the time of submission, please state that they will be provided during review. They must be provided prior to publication.

Interventionary studies involving animals or humans, and other studies require ethical approval must list the authority that provided approval and the corresponding ethical approval code. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusions}

This section is not mandatory, but can be added to the manuscript if the discussion is unusually long or complex.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{6pt} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
%\supplementary{The following are available online at \linksupplementary{s1}, Figure S1: title, Table S1: title, Video S1: title.}

% Only for the journal Methods and Protocols:
% If you wish to submit a video article, please do so with any other supplementary material.
% \supplementary{The following are available at \linksupplementary{s1}, Figure S1: title, Table S1: title, Video S1: title. A supporting video article is available at doi: link.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\authorcontributions{For research articles with several authors, a short paragraph specifying their individual contributions must be provided. The following statements should be used ``conceptualization, X.X. and Y.Y.; methodology, X.X.; software, X.X.; validation, X.X., Y.Y. and Z.Z.; formal analysis, X.X.; investigation, X.X.; resources, X.X.; data curation, X.X.; writing--original draft preparation, X.X.; writing--review and editing, X.X.; visualization, X.X.; supervision, X.X.; project administration, X.X.; funding acquisition, Y.Y.'', please turn to the  \href{http://img.mdpi.org/data/contributor-role-instruction.pdf}{CRediT taxonomy} for the term explanation. Authorship must be limited to those who have contributed substantially to the work reported.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\funding{The financial support from the Deutsche Forschungsgemeinschaft (German Research Foundation, DFG) under grant number OR 196/33-1 is gracefully acknowledged.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\acknowledgments{In this section you can acknowledge any support given which is not covered by the author contribution or funding sections. This may include administrative and technical support, or donations in kind (e.g., materials used for experiments).}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\conflictsofinterest{The authors declare no conflict of interest.} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
\abbreviations{The following abbreviations are used in this manuscript:\\

\noindent 
\begin{tabular}{@{}ll}
REA & Reciprocal set of Euler angles
\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
\appendixtitles{no} %Leave argument "no" if all appendix headings stay EMPTY (then no dot is printed after "Appendix A"). If the appendix sections contain a heading then change the argument to "yes".
\appendix
\section{Mathematical Symbols for Reciprocal Euler Angles}
\label{sec:appendix_proof_REW}
%\unskip
%\subsection{}



\begin{itemize}
    \item Details zu den Partiellen Ableitungen in den verschiedenen Gleichungen
    \item Genauer Inhalt der Spalten-Operatoren und der Euler-Winkel-Ableitungen
    \item Herleitung für Zusammenhang Rotationsmatrix-Winkelgeschwindigkeit (Gradienten)
\end{itemize}


\subsection{Proof for the Properties of Reciprocal Euler angles}
\label{sec:appendix_eulerreciproc}


This section derives the effect of the reciprocity of Euler-angles at the example of the kinematics description of Sec.\,\ref{sec:RecEulAng} and the frames of Fig.\,\ref{fig:frames_5dof_6dof}\,(b).

An end-effector orientation $\bm{\beta}=\bm{x}_{\mathrm{r}}$ gives the rotation matrix\footnote{The matrix rotates vectors from $\ks{E}$ to $\ks{D}$} from the actual end-effector frame $\ks{E}$ to the desired end-effector frame $\ks{D}$
%
\begin{equation}
\rotmat{D}{E}(\bm{\beta},\bm{q})
= 
\rotmat{0}{D}^\transp (\bm{\beta})\rotmat{0}{E}(\bm{q})
\label{equ:orierr_1_rotmat}
\end{equation}
%
where using the $X$-$Y$-$Z$-Euler angles yields
%
\begin{equation}
\rotmat{0}{D}^\transp(\bm{\beta})
=
\bm{R}_z(-\beta_3) \bm{R}_y(-\beta_2) \bm{R}_x(-\beta_1)
\end{equation}
%
as introduced in (\ref{equ:def_rmat_xyz}).
With an additional rotation $-\delta$ around the $z$-axis for the desired orientation, the resulting new Euler angles are
%
\begin{equation}
\beta_1'=\beta_1,  \quad \beta_2'=\beta_2,  \quad \beta_3'=\beta_3-\delta.
\end{equation}
%
The additional rotation corresponds to the tool axis defined in Sec.\,\ref{sec:RecEulAng} % and does not influence 3T2R tasks.
and leads to a new residual orientation error expressed as a rotation matrix
%
\begin{align}
    \rotmat{D}{E}(\bm{\beta}',\bm{q})
    &=
    \rotmat{0}{D}^\transp (\bm{\beta}') \rotmat{0}{E}(\bm{q}) \nonumber\\
    &=
    \left(\rotmat{0}{D}(\bm{\beta})\bm{R}_z(-\delta)\right)^\transp \rotmat{0}{E}(\bm{q}) \nonumber \\
    &=
    \bm{R}_z(\delta) \rotmat{0}{D}^\transp (\bm{\beta}) \rotmat{0}{E}(\bm{q}) \nonumber \\
    &=
    \bm{R}_z(\delta) \rotmat{D}{E}(\bm{\beta},\bm{q}).
    \label{equ:orierr_2_rotmat}
\end{align}

The first residual orientation error from (\ref{equ:orierr_1_rotmat}) corresponding to $\bm{\beta}$ is defined as a rotation matrix
%
% Quelle: equations/R1.txt (aus ikfr_paper_equations.mw)
\begin{align}
    \rotmat{D}{E}(\bm{\beta},\bm{q})
    =
    \begin{bmatrix}
        {n_x}&{o_x}&{a_x} \\
        {n_y}&{o_y}&{a_y} \\ 
        {n_z}&{o_z}&{a_z} \\ 
    \end{bmatrix}
    \label{equ:orierr_1_rotmat_def}
\end{align}
%
and as a $Z$-$Y$-$X$-Euler angle representation
%
% Quelle: equations/alpha1.txt (aus ikfr_paper_equations.mw)
\begin{align}
    \bm{\alpha} =
    \begin{bmatrix}
        \arctan \left( {n_y} / { n_x} \right) \\ 
        \arctan \left( -{n_z} / \sqrt {{{a_z}}^{2}+{{ o_z}}^{2}} \right) \\ 
        \arctan \left( {o_z} / {a_z} \right)
    \end{bmatrix}.
    \label{equ:alpha_xyz}
\end{align}

The second error corresponding to $\bm{\beta}'$ only differs regarding the additional rotation $\delta$. Combining (\ref{equ:orierr_2_rotmat}) and (\ref{equ:orierr_1_rotmat_def}) leads to
%
% Quelle: equations/R2.txt (aus ikfr_paper_equations.mw)
\begin{align}
    \rotmat{D}{E}(\bm{\beta}',\bm{q})
    = 
    \left[ \begin {array}{ccc} { C_{\delta}}\,{n_x}-{ S_{\delta}}\,{ n_y}&{ C_{\delta}}\,{o_x}-{ S_{\delta}}\,{o_y}&{ C_{\delta}}\,{ a_x}-{ S_{\delta}}\,{a_y}\\ \noalign{\medskip}{ C_{\delta}}\,{n_y}+ { S_{\delta}}\,{n_x}&{ C_{\delta}}\,{o_y}+{ S_{\delta}}\,{o_x}&{  C_{\delta}}\,{a_y}+{ S_{\delta}}\,{a_x}\\ \noalign{\medskip}{ n_z}&{o_z}&{a_z}\end {array} \right] \nonumber
\end{align}
%
where $C_{\delta}=\mathrm{cos}(\delta)$ and $S_{\delta}=\mathrm{sin}(\delta)$.
The $Z$-$Y$-$X$-Euler angles from this rotation matrix are
%
% Quelle: equations/alpha2.txt (aus ikfr_paper_equations.mw)
\begin{equation}
\bm{\alpha}' =
\begin{bmatrix}
\arctan \left( ({  C_{\delta}}\,{n_y}+{ S_{\delta}}\,{n_x}) / ({ C_{\delta}}\,{n_x}-{  S_{\delta}}\,{n_y}) \right) \\
\arctan \left( -{n_z} / \sqrt {{{a_z}}^{2}+{{ o_z}}^{2}} \right) \\
\arctan \left( {o_z} / {a_z} \right)
\end{bmatrix}
\end{equation}
%
where $\delta$  only influences the first component $\alpha_1$.
This allows the conclusion, that $\beta_3$ only influences $\alpha_1$ and results in the dependencies
%
\begin{align}
    \alpha_1'&=\alpha_1'(\bm{q},\beta_1,\beta_2,\beta_3)\\
    \alpha_2'&=\alpha_2'(\bm{q},\beta_1,\beta_2) =\alpha_2\\
    \alpha_3'&=\alpha_3'(\bm{q},\beta_1,\beta_2) =\alpha_3
\end{align}
%
already displayed in (\ref{equ:alpha_dep_beta}) with the consequences for the kinematic modeling of robots in 3T2R tasks described in Sec.\,\ref{sec:RecEulAng_effect}.



\subsection{Matrix Operations for Partial Derivatives}
\label{sec:appendix_gradient_matrix}



The column operator $\overline{\bm{R}}$ for rotation matrices $\bm{R}$ to stack the coordinate systems unit vectors $\bm{n},\bm{o},\bm{a} \in {\mathbb{R}}^{3}$ vertically instead of horizontally is defined as
%
\begin{equation}
\overline{\bm{R}}(\bm{R})=\begin{bmatrix}
\bm{n} \\ \bm{o} \\ \bm{a}
\end{bmatrix} \in {\mathbb{R}}^{9}
\quad
\mathrm{with}
\quad
\bm{R}=\begin{bmatrix}
\bm{n} & \bm{o} & \bm{a}
\end{bmatrix}
=
\begin{bmatrix}
{n_x}&{o_x}&{a_x} \\
{n_y}&{o_y}&{a_y} \\ 
{n_z}&{o_z}&{a_z} \\ 
\end{bmatrix}
\in \mathrm{SO}(3)
\label{equ:def_rotmat}
\end{equation}
%
to avoid differentiating matrices or w.r.t. matrices.
Matrix multiplication is then expressed with the matrix product operator $\overline{\Pi}$
%
such that
%
\begin{equation}
\rotmato{1}{3}
=
\overline{\prod}\left( \rotmato{1}{2}, \rotmato{2}{3}\right)
=
\overline{\bm{R}}(\rotmat{1}{3})
\quad
\mathrm{with}
\quad
\rotmat{1}{3}
=
\rotmat{1}{2}
\rotmat{2}{3}.
\label{equ:matprod}
\end{equation}
%
The transposition operator $\bm{P}_\transp$ is a $9 \times 9$ permutation matrix such that
%
\begin{equation}
\rotmato{2}{1}
=
\bm{P}_\transp \rotmato{1}{2}
\in {\mathbb{R}}^{9}
\enspace
\mathrm{with}
\enspace
\rotmat{2}{1}
=
\rotmat{1}{2}^\transp
\in \mathrm{SO}(3)
\enspace
\mathrm{and}
\enspace
\rotmato{1}{2}=\overline{\bm{R}}(\rotmat{1}{2})
.
\end{equation}
%
The Euler angles can be calculated from the general rotation matrix $\bm{R}$ of (\ref{equ:def_rotmat}) in the same way as before\footnote{Utilizing the sign-aware operator $\arctantwo(y,x)$ instead of $\arctan(y/x)$ allows angles to be in $(-\pi,+\pi]$, removes ambiguities and provides global differentiability.} using these operators with the notation
%
\begin{equation}
\bm{\alpha}(\overline{\bm{R}})
=
\bm{\alpha}(\bm{R})
=
\begin{bmatrix}
\arctantwo \left( {n_y} , { n_x} \right) \\ 
\arctantwo \left( -{n_z} , \sqrt {{{a_z}}^{2}+{{ o_z}}^{2}} \right) \\ 
\arctantwo \left( {o_z} , {a_z} \right)
\end{bmatrix}
\label{equ:alpha_def_rotmat_zyx}
\end{equation}
%
at the $Z$-$Y$-$X$ example.


\subsection{Contents of the Partial Derivatives}
\label{sec:appendix_content_derivatives}

The single expressions derived in Sec.\,\ref{sec:RecEulAng_implement} for the serial chains and in Sec.\,\ref{sec:ParRobKinConstr} for the parallel chains can be calculated with low computational effort from the definition of the $X$-$Y$-$Z$- and $Z$-$Y$-$X$-Euler angles from (\ref{equ:def_rmat_xyz}), (\ref{equ:def_rmat_zyxr}) and (\ref{equ:alpha_xyz}).
With $\overline{\bm{R}}=[n_x,n_y,n_z ,o_x,o_y,o_z,a_x,a_y,a_z]^\transp$ the gradient ``I'' in (\ref{equ:grad_Phi_q}) becomes
% Quelle: equations/dalphadRb.txt (aus ikfr_paper_equations.mw)
\begin{equation}
\left(\frac{\partial \overline{\bm{\alpha}}}{\partial \overline{\bm{R}}}\right)^\transp
=
\left[ \begin {array}{ccc} -{\frac {{n_y}}{{{n_x}}^{2}+{{n_y }}^{2}}}&0&0\\ \noalign{\medskip}{\frac {{n_x}}{{{n_x}}^{2}+{{ n_y}}^{2}}}&0&0\\ \noalign{\medskip}0&-\sqrt {{{a_z}}^{2}+{{ o_z}}^{2}}&0\\ \noalign{\medskip}0&0&0\\ \noalign{\medskip}0&0&0 \\ \noalign{\medskip}0&{\frac {{n_z}\,{o_z}}{\sqrt {{{a_z}}^{ 2}+{{o_z}}^{2}}}}&{\frac {{a_z}}{{{a_z}}^{2}+{{o_z}}^{2}}} \\ \noalign{\medskip}0&0&0\\ \noalign{\medskip}0&0&0 \\ \noalign{\medskip}0&{\frac {{n_z}\,{a_z}}{\sqrt {a_z^{2}+{{o_z}}^{2}}}}&-{\frac {o_z}{a_z^{2}+o_z^{2}} }\end {array} \right] 
\end{equation}
%
and the inverse gradient ``I'' in (\ref{equ:grad_Phi_x}) yields
%
% Quelle: equations/R2b_dxyz.txt (aus ikfr_paper_equations.mw)
\begin{align}
    \left(\frac{\partial \overline{\bm{R}}(\overline{\bm{\beta}})}{\partial \overline{\bm{\beta}}}\right)
    =
    \small
    \begin{bmatrix}
        0&-{ S_2}\,{ C_3}&-{ C_2}\,{ S_3}
        \\ { C_1}\,{ S_2}\,{ C_3}-{ S_1}\,{ S_3}&{
            S_1}\,{ C_2}\,{ C_3}&-{ S_1}\,{ S_2}\,{ S_3}+{ C_1}\,{
            C_3}\\ { S_1}\,{ S_2}\,{ C_3}+{ C_1}\,{
            S_3}&-{ C_1}\,{ C_2}\,{ C_3}&{ C_1}\,{ S_2}\,{ S_3}+{
            S_1}\,{ C_3}\\ 0&{ S_2}\,{ S_3}&-{ C_2}\,
        { C_3}\\ -{ C_1}\,{ S_2}\,{ S_3}-{ S_1}\,{
            C_3}&-{ S_1}\,{ C_2}\,{ S_3}&-{ S_1}\,{ S_2}\,{ C_3}-{
            C_1}\,{ S_3}\\ -{ S_1}\,{ S_2}\,{ S_3}+{
            C_1}\,{ C_3}&{ C_1}\,{ C_2}\,{ S_3}&{ C_1}\,{ S_2}\,{
            C_3}-{ S_1}\,{ S_3}\\ 0&{ C_2}&0
        \\ -{ C_1}\,{ C_2}&{ S_1}\,{ S_2}&0
        \\ -{ S_1}\,{ C_2}&-{ C_1}\,{ S_2}&0
        \end {bmatrix}  \nonumber
    \end{align}
    %
    with $C_i=\mathrm{cos}(\beta_i)$, $S_i=\mathrm{sin}(\beta_i)$.
    The gradient of the matrix product (\ref{equ:matprod}) w.r.t. the second factor used in (\ref{equ:grad_Phi_x}) term ``III'' and (\ref{equ:grad_Phi_q}) term ``II'' is
    %
    \begin{equation}
    \frac{\partial }{\partial \overline{\bm{R}}_2}
    \overline{\prod}\left( \overline{\bm{R}}_1, \overline{\bm{R}}_2\right)
    =
    \begin{bmatrix}
    \bm{R}_1 & \bm{0} & \bm{0} \\
    \bm{0} & \bm{R}_1 & \bm{0} \\
    \bm{0} & \bm{0} & \bm{R}_1  \\
    \end{bmatrix}
    \end{equation}
    %
    and the gradient w.r.t. the first factor used in (\ref{equ:ee_rotation_gradq}) term ``I'' is
    %
    \begin{equation}
    \frac{\partial }{\partial \overline{\bm{R}}_1}
    \overline{\prod}\left( \overline{\bm{R}}_1, \overline{\bm{R}}_2\right)
    =
    \begin{bmatrix}
    {\mathrm{diag}}(n_x)&{\mathrm{diag}}(o_x)&{\mathrm{diag}}(a_x) \\ {\mathrm{diag}}(n_y)&{\mathrm{diag}}(o_y)&{\mathrm{diag}}(a_y)\\ {\mathrm{diag}}(n_z)&{\mathrm{diag}}(o_z)&{\mathrm{diag}}(a_z)
    \end{bmatrix}
    \end{equation}
    %
    where $n_x,n_y,...$ are the entries of $\bm{R}_2$ and the $\mathrm{diag}$-matrices are $3 \times 3$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Citations and References in Supplementary files are permitted provided that they also appear in the reference list here. 

%=====================================
% References, variant A: internal bibliography
%=====================================
\reftitle{References}
%\begin{thebibliography}{999}
%% Reference 1
%\bibitem[Author1(year)]{ref-journal}
%Author1, T. The title of the cited article. {\em Journal Abbreviation} {\bf 2008}, {\em 10}, 142--149.
%% Reference 2
%\bibitem[Author2(year)]{ref-book}
%Author2, L. The title of the cited contribution. In {\em The Book Title}; Editor1, F., Editor2, A., Eds.; Publishing House: City, Country, 2007; pp. 32--58.
%\end{thebibliography}

% The following MDPI journals use author-date citation: Arts, Econometrics, Economies, Genealogy, Humanities, IJFS, JRFM, Laws, Religions, Risks, Social Sciences. For those journals, please follow the formatting guidelines on http://www.mdpi.com/authors/references
% To cite two works by the same author: \citeauthor{ref-journal-1a} (\citeyear{ref-journal-1a}, \citeyear{ref-journal-1b}). This produces: Whittaker (1967, 1975)
% To cite two works by the same author with specific pages: \citeauthor{ref-journal-3a} (\citeyear{ref-journal-3a}, p. 328; \citeyear{ref-journal-3b}, p.475). This produces: Wong (1999, p. 328; 2000, p. 475)

%=====================================
% References, variant B: external bibliography
%=====================================
\externalbibliography{yes}
\bibliography{references}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% optional
%\sampleavailability{Samples of the compounds ...... are available from the authors.}

%% for journal Sci
%\reviewreports{\\
%Reviewer 1 comments and authors’ response\\
%Reviewer 2 comments and authors’ response\\
%Reviewer 3 comments and authors’ response
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}

